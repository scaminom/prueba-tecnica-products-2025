<div class="product-layout-container">
  <app-header />

  <main class="main-content">
    <app-product-search
      [searchTerm]="searchTerm()"
      (searchChange)="onSearchChange($event)"
      (addProduct)="onAddProduct()"
    />

    <app-product-table
      [products]="products()"
      [loading]="loading()"
      [error]="error()"
      [isEmpty]="isEmpty()"
      [productsCount]="filteredCount()"
      [pageSize]="pageSize()"
      (editProduct)="onEditProduct($event)"
      (deleteProduct)="onDeleteProduct($event)"
      (pageSizeChange)="onPageSizeChange($event)"
      (retryLoad)="onRetryLoad()"
    />
  </main>

  <app-modal [show]="showDeleteModal()" (close)="cancelDelete()">
    <div modal-body>
      <p class="modal-message">
        ¿Estás seguro de eliminar el producto {{ productToDelete()?.name }}?
      </p>
    </div>
    <div modal-actions class="modal-actions">
      <button class="btn-cancel" type="button" (click)="cancelDelete()">Cancelar</button>
      <button class="btn-confirm" type="button" (click)="confirmDelete()">Confirmar</button>
    </div>
  </app-modal>
</div>

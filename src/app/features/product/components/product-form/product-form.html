<div class="product-form-container">
  <!-- Header -->
  <header class="header">
    <div class="bank-logo">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M12 2L2 7v10c0 5.5 3.8 7.7 9 9 5.2-1.3 9-3.5 9-9V7l-10-5z" fill="#0066cc" />
      </svg>
      <span class="bank-title">BANCO</span>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="form-header">
      <h1 class="form-title">
        {{ isEditMode() ? 'Editar Producto' : 'Formulario de Registro' }}
      </h1>
    </div>

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">
      <!-- ID Field -->
      <div class="form-group">
        <label for="id" class="form-label">ID</label>
        <input
          type="text"
          id="id"
          formControlName="id"
          class="form-input"
          [class.error]="isFieldInvalid('id')"
          placeholder="Ingrese el ID del producto"
        />
        @if (isFieldInvalid('id')) {
        <span class="error-message">{{ getFieldError('id', 'ID') }}</span>
        }
      </div>

      <!-- Name Field -->
      <div class="form-group">
        <label for="name" class="form-label">Nombre</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-input"
          [class.error]="isFieldInvalid('name')"
          placeholder="Ingrese el nombre del producto"
        />
        @if (isFieldInvalid('name')) {
        <span class="error-message">{{ getFieldError('name', 'Nombre') }}</span>
        }
      </div>

      <!-- Description Field -->
      <div class="form-group">
        <label for="description" class="form-label">Descripción</label>
        <textarea
          id="description"
          formControlName="description"
          class="form-textarea"
          [class.error]="isFieldInvalid('description')"
          placeholder="Ingrese la descripción del producto"
          rows="3"
        ></textarea>
        @if (isFieldInvalid('description')) {
        <span class="error-message">{{ getFieldError('description', 'Descripción') }}</span>
        }
      </div>

      <!-- Logo Field -->
      <div class="form-group">
        <label for="logo" class="form-label">Logo</label>
        <input
          type="url"
          id="logo"
          formControlName="logo"
          class="form-input"
          [class.error]="isFieldInvalid('logo')"
          placeholder="Ingrese la URL del logo"
        />
        @if (isFieldInvalid('logo')) {
        <span class="error-message">{{ getFieldError('logo', 'Logo') }}</span>
        }
      </div>

      <!-- Release Date Field -->
      <div class="form-group">
        <label for="date_release" class="form-label">Fecha de Liberación</label>
        <input
          type="date"
          id="date_release"
          formControlName="date_release"
          class="form-input"
          [class.error]="isFieldInvalid('date_release')"
          (change)="onDateReleaseChange()"
        />
        @if (isFieldInvalid('date_release')) {
        <span class="error-message">{{
          getFieldError('date_release', 'Fecha de Liberación')
        }}</span>
        }
      </div>

      <!-- Revision Date Field -->
      <div class="form-group">
        <label for="date_revision" class="form-label">Fecha de Revisión</label>
        <input
          type="date"
          id="date_revision"
          formControlName="date_revision"
          class="form-input"
          [class.error]="isFieldInvalid('date_revision')"
          readonly
        />
        @if (isFieldInvalid('date_revision')) {
        <span class="error-message">
          {{
            getFieldError('date_revision', 'Fecha de Revisión') ||
              'La fecha de revisión debe ser exactamente un año posterior a la fecha de liberación'
          }}
        </span>
        }
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="onReset()">Reiniciar</button>
        <button type="submit" class="btn-primary" [disabled]="productForm.invalid || loading()">
          {{ isEditMode() ? 'Actualizar' : 'Agregar' }}
        </button>
      </div>
    </form>

    <!-- Error Display -->
    @if (error()) {
    <div class="error-container">
      <div class="error-message-global">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" stroke="#ef4444" stroke-width="2" />
          <line x1="15" y1="9" x2="9" y2="15" stroke="#ef4444" stroke-width="2" />
          <line x1="9" y1="9" x2="15" y2="15" stroke="#ef4444" stroke-width="2" />
        </svg>
        <span>{{ error() }}</span>
      </div>
    </div>
    }
  </main>
</div>
